<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Happy birthday Trang">
    <meta property="og:title" content="Happy birthday Trang" />
    <meta property="og:description" content="Happy birthday Trang" />
    <meta property="og:image" content="https://i1.sndcdn.com/artworks-000496259538-r8alo3-t500x500.jpg" />
    <title>Happy Brithday</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.11/typed.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <!-- load thư vien animate -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="testb.css">
    <link rel="stylesheet" href="testa1.css">
    <style>
        #img {
            width: 250px;
            height: 200px;
        }
    </style>
</head>

<body>


    <iframe src="silence3.mp3" allow="autoplay" id="audio" muted style="display: none"></iframe>
    <audio controls autoplay preload class="nhac">
    <source src="Happybirthday.mp3" type="audio/mpeg">

  </audio>

    <div class='moon animate__animated animate__pulse animate__delay-1s animate__infinite	infinit'>
        <div class='crater1'></div>
        <div class='crater2'></div>
        <div class='crater3'></div>
        <!--  -->
    </div>

    <canvas id="canvas"></canvas>

    <div id="sea"></div>
    <div id="beach"></div>
    <!-- 969 - 630 -->

    <!-- <img src="/birthday/image/chuc-mung-sinh-nhat-avatar.png" alt="Jumping-people" id="people" /> -->
    <!-- <img src="/birthday/image/anhgau.PNG" alt="Jumping-people" id="people" /> -->

    <div id="merrywrap" class="merrywrap">
        <section>
            <video class="videook" loop src="particles.mp4" muted="" autoplay=""></video>

            <h3 class="chu-text animate__animated animate__wobble"><span class="span-do">Trần Thị Huyền Trang</span></h3>
            <div class="box">
                <div class="circle ">
                    <h2>Happy <br> Birthday Nhớ</h2>
                </div>
            </div>
            <div class="text-chuc animate__animated animate__backInUp animate__delay-5s">
                Chúc Trang <span class="typing typing-text"></span>

            </div>
            <div class="good-luck   animate__animated animate__backInUp animate__delay-5s"></div>
            <div class="giftbox animate__animated animate__rubberBand animate__delay-2s animate__infinite	infinite">
                <!--  -->
                <div class="cover">
                    <div></div>
                </div>

                <div class="box"></div>
            </div>

            <div class="icons animate__animated animate__pulse animate__delay-1s animate__infinite	infinit">

                <div class="row">
                    <span>Chúc Trang sang tuổi mới xinh lại càng xinh, hạnh phúc bên gia đình, người thân, luôn ngập tràn niềm vui, hạnh phúc và thật nhiều may mắn nhé!</span>

                </div>
            </div>
        </section>
    </div>

    <div id="video">
        <div class="iframe">

            <!-- <img class="image-slide animate__animated animate__flash animate__delay-1s animate__infinite 3" src="/birthday/image/anh.jpg"> -->

            <!-- change image -->
            <div class="image">
                <!-- <img id="img" onclick="changeImage()" src="/birthday/image/chuc-mung-sinh-nhat-avatar.png" alt=""> -->
                <img id="img" onclick="changeImage()" src="chuc-mung-sinh-nhat-avatar.png" alt="">
            </div>
            <script>
                var index = 1;
                changeImage = function() {
                    // var imgs = ["/birthday/image/chuc-mung-sinh-nhat-avatar.png", "/thaydoianh/image/anh.jpg", "/birthday/image/anhgau.PNG", "/birthday/image/tao.PNG"];
                    var imgs = ["chuc-mung-sinh-nhat-avatar.png", "anh.jpg", "anhgau.PNG", "tao.PNG"];
                    document.getElementById('img').src = imgs[index];
                    index++;
                    if (index == 4) {
                        index = 0;
                    }
                }
                setInterval(changeImage, 3000);
            </script>

            <div class="box_nhac ">
                <div class="pulse"><i class="fas fa-play-circle"></i><span class="opentext"></span></div>
                <audio controls preload class="nhac">
            <source src="FILE_20220422_222642_Happy Birthday to You_Ulrik Lundstrm_1650620400.mp3" type="audio/mpeg">
      </audio>
            </div>

        </div>
    </div>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/js/bootstrap.min.js"></script>

    <script>
        function bubbles() {
            let count = 150;
            let section = document.querySelector('section');
            let i = 0


            while (i < count) {
                let bubble = document.createElement('i');
                let x = Math.floor(Math.random() * window.innerWidth);
                let y = Math.floor(Math.random() * window.innerHeight);

                var size = Math.random() * 12;
                bubble.style.left = x + 'px';
                bubble.style.top = y + 'px';
                bubble.style.width = 1 + size + 'px';
                bubble.style.height = 1 + size + 'px';

                bubble.style.animationDuration = 5 + size + 's';
                bubble.style.animationDelay = -size + 's';
                section.appendChild(bubble);
                i++

            }


        }
        bubbles()

        $(document).ready(function() {

            window.requestAnimFrame = function() {
                return window.requestAnimationFrame ||
                    window.webkitRequestAnimationFrame ||
                    window.mozRequestAnimationFrame ||
                    function(callback) {
                        window.setTimeout(callback, 1000 / 60);
                    };
            }();

            // now we will setup our basic variables for the demo
            var canvas = document.getElementById('canvas'),
                ctx = canvas.getContext('2d'),
                // full screen dimensions
                cw = window.innerWidth,
                ch = window.innerHeight,
                // firework collection
                fireworks = [],
                // particle collection
                particles = [],
                // starting hue
                hue = 120,
                // when launching fireworks with a click, too many get launched at once without a limiter, one launch per 5 loop ticks
                limiterTotal = 5,
                limiterTick = 0,
                // this will time the auto launches of fireworks, one launch per 80 loop ticks
                timerTotal = 80,
                timerTick = 0,
                mousedown = false,
                // mouse x coordinate,
                mx,
                // mouse y coordinate
                my;

            // set canvas dimensions
            canvas.width = cw;
            canvas.height = ch;

            // now we are going to setup our function placeholders for the entire demo

            // get a random number within a range
            function random(min, max) {
                return Math.random() * (max - min) + min;
            }

            // calculate the distance between two points
            function calculateDistance(p1x, p1y, p2x, p2y) {
                var xDistance = p1x - p2x,
                    yDistance = p1y - p2y;
                return Math.sqrt(Math.pow(xDistance, 2) + Math.pow(yDistance, 2));
            }

            // create firework
            function Firework(sx, sy, tx, ty) {
                // actual coordinates
                this.x = sx;
                this.y = sy;
                // starting coordinates
                this.sx = sx;
                this.sy = sy;
                // target coordinates
                this.tx = tx;
                this.ty = ty;
                // distance from starting point to target
                this.distanceToTarget = calculateDistance(sx, sy, tx, ty);
                this.distanceTraveled = 0;
                // track the past coordinates of each firework to create a trail effect, increase the coordinate count to create more prominent trails
                this.coordinates = [];
                this.coordinateCount = 3;
                // populate initial coordinate collection with the current coordinates
                while (this.coordinateCount--) {
                    this.coordinates.push([this.x, this.y]);
                }
                this.angle = Math.atan2(ty - sy, tx - sx);
                this.speed = 2;
                this.acceleration = 1.05;
                this.brightness = random(50, 70);
                // circle target indicator radius
                this.targetRadius = 1;
            }

            // update firework
            Firework.prototype.update = function(index) {
                // remove last item in coordinates array
                this.coordinates.pop();
                // add current coordinates to the start of the array
                this.coordinates.unshift([this.x, this.y]);

                // cycle the circle target indicator radius
                if (this.targetRadius < 8) {
                    this.targetRadius += 0.3;
                } else {
                    this.targetRadius = 1;
                }

                // speed up the firework
                this.speed *= this.acceleration;

                // get the current velocities based on angle and speed
                var vx = Math.cos(this.angle) * this.speed,
                    vy = Math.sin(this.angle) * this.speed;
                // how far will the firework have traveled with velocities applied?
                this.distanceTraveled = calculateDistance(this.sx, this.sy, this.x + vx, this.y + vy);

                // if the distance traveled, including velocities, is greater than the initial distance to the target, then the target has been reached
                if (this.distanceTraveled >= this.distanceToTarget) {
                    createParticles(this.tx, this.ty);
                    // remove the firework, use the index passed into the update function to determine which to remove
                    fireworks.splice(index, 1);
                } else {
                    // target not reached, keep traveling
                    this.x += vx;
                    this.y += vy;
                }
            };

            // draw firework
            Firework.prototype.draw = function() {
                ctx.beginPath();
                // move to the last tracked coordinate in the set, then draw a line to the current x and y
                ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
                ctx.lineTo(this.x, this.y);
                ctx.strokeStyle = 'hsl(' + hue + ', 100%, ' + this.brightness + '%)';
                ctx.stroke();

                ctx.beginPath();
                // draw the target for this firework with a pulsing circle
                ctx.arc(this.tx, this.ty, this.targetRadius, 0, Math.PI * 2);
                ctx.stroke();
            };

            // create particle
            function Particle(x, y) {
                this.x = x;
                this.y = y;
                // track the past coordinates of each particle to create a trail effect, increase the coordinate count to create more prominent trails
                this.coordinates = [];
                this.coordinateCount = 5;
                while (this.coordinateCount--) {
                    this.coordinates.push([this.x, this.y]);
                }
                // set a random angle in all possible directions, in radians
                this.angle = random(0, Math.PI * 2);
                this.speed = random(1, 10);
                // friction will slow the particle down
                this.friction = 0.95;
                // gravity will be applied and pull the particle down
                this.gravity = 1;
                // set the hue to a random number +-20 of the overall hue variable
                this.hue = random(hue - 20, hue + 20);
                this.brightness = random(50, 80);
                this.alpha = 1;
                // set how fast the particle fades out
                this.decay = random(0.015, 0.03);
            }

            // update particle
            Particle.prototype.update = function(index) {
                // remove last item in coordinates array
                this.coordinates.pop();
                // add current coordinates to the start of the array
                this.coordinates.unshift([this.x, this.y]);
                // slow down the particle
                this.speed *= this.friction;
                // apply velocity
                this.x += Math.cos(this.angle) * this.speed;
                this.y += Math.sin(this.angle) * this.speed + this.gravity;
                // fade out the particle
                this.alpha -= this.decay;

                // remove the particle once the alpha is low enough, based on the passed in index
                if (this.alpha <= this.decay) {
                    particles.splice(index, 1);
                }
            };

            // draw particle
            Particle.prototype.draw = function() {
                ctx.beginPath();
                // move to the last tracked coordinates in the set, then draw a line to the current x and y
                ctx.moveTo(this.coordinates[this.coordinates.length - 1][0], this.coordinates[this.coordinates.length - 1][1]);
                ctx.lineTo(this.x, this.y);
                ctx.strokeStyle = 'hsla(' + this.hue + ', 100%, ' + this.brightness + '%, ' + this.alpha + ')';
                ctx.stroke();
            };

            // create particle group/explosion
            function createParticles(x, y) {
                // increase the particle count for a bigger explosion, beware of the canvas performance hit with the increased particles though
                var particleCount = 30;
                while (particleCount--) {
                    particles.push(new Particle(x, y));
                }
            }

            // main demo loop
            function loop() {
                // this function will run endlessly with requestAnimationFrame
                requestAnimFrame(loop);

                // increase the hue to get different colored fireworks over time
                hue += 0.5;

                // normally, clearRect() would be used to clear the canvas
                // we want to create a trailing effect though
                // setting the composite operation to destination-out will allow us to clear the canvas at a specific opacity, rather than wiping it entirely
                ctx.globalCompositeOperation = 'destination-out';
                // decrease the alpha property to create more prominent trails
                ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                ctx.fillRect(0, 0, cw, ch);
                // change the composite operation back to our main mode
                // lighter creates bright highlight points as the fireworks and particles overlap each other
                ctx.globalCompositeOperation = 'lighter';

                // loop over each firework, draw it, update it
                var i = fireworks.length;
                while (i--) {
                    fireworks[i].draw();
                    fireworks[i].update(i);
                }

                // loop over each particle, draw it, update it
                var i = particles.length;
                while (i--) {
                    particles[i].draw();
                    particles[i].update(i);
                }

                // launch fireworks automatically to random coordinates, when the mouse isn't down
                if (timerTick >= timerTotal) {
                    if (!mousedown) {
                        // start the firework at the bottom middle of the screen, then set the random target coordinates, the random y coordinates will be set within the range of the top half of the screen
                        fireworks.push(new Firework(cw / 2, ch, random(0, cw), random(0, ch / 2)));
                        timerTick = 0;
                    }
                } else {
                    timerTick++;
                }

                // limit the rate at which fireworks get launched when mouse is down
                if (limiterTick >= limiterTotal) {
                    if (mousedown) {
                        // start the firework at the bottom middle of the screen, then set the current mouse coordinates as the target
                        fireworks.push(new Firework(cw / 2, ch, mx, my));
                        limiterTick = 0;
                    }
                } else {
                    limiterTick++;
                }
            }

            window.onload = function() {
                var merrywrap = document.getElementById("merrywrap");
                var box = merrywrap.getElementsByClassName("giftbox")[0];
                var step = 1;
                var stepMinutes = [2000, 2000, 1000, 1000];

                function init() {
                    box.addEventListener("click", openBox, false);
                }

                function stepClass(step) {
                    merrywrap.className = 'merrywrap';
                    merrywrap.className = 'merrywrap step-' + step;
                }

                function openBox() {

                    if (step === 1) {
                        box.removeEventListener("click", openBox, false);
                    }
                    stepClass(step);
                    if (step === 3) {}
                    if (step === 4) {
                        reveal();
                        return;
                    }
                    setTimeout(openBox, stepMinutes[step - 1]);
                    step++;
                }

                init();

            };

            function reveal() {
                document.querySelector('.merrywrap').style.backgroundColor = 'transparent';
                document.querySelector('section').style.backgroundColor = 'transparent';
                document.querySelector('section .box').style.visibility = 'hidden';
                document.querySelector('.chu-text').style.visibility = 'hidden';
                document.querySelector('.videook').style.visibility = 'hidden';
                document.querySelector('.text-chuc').style.visibility = 'hidden';
                document.querySelector('.good-luck').style.visibility = 'hidden';
                document.querySelector('.iframe').style.opacity = 1;
                document.querySelector('section i').style.backgroundColor = 'transparent';
                loop();


            }

            $(document).ready(function() {



                var typed = new Typed('.typing', {
                    strings: ["luôn vui vẻ ", 'luôn tràn đầy sức khỏe', 'luôn luôn xinh đẹp', 'luôn luôn yêu đời nhaaa....', 'gặp thật nhiều may mắn trong cuộc sống'],
                    typeSpeed: 130,
                    backSpeed: 100,
                    loop: true
                });
            });

        });
    </script>

</body>

</html>